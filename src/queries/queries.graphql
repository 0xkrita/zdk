fragment CollectionFragment on Collection {
  name
  symbol
  address
  totalSupply
}

fragment FullMedia on TokenContentMedia {
size
    url
    size
    mimeType
    mediaType
    mediaEncoding {
      preview
      original
    }
}

fragment TokenSummaryFragment on Token {
  minter
  tokenId
  mintInfo {
    blockTimestamp
    blockNumber
    transactionHash
  }
  tokenUrl
  tokenAddress
  lastRefreshTime
  owner
  name
  description
  image {
    ...FullMedia
  }
  content {
    ...FullMedia
  }
}

fragment TokenFullFragment on Token {
  ...TokenSummaryFragment

  metadata

  # todo(iain): include transfer / market information?
}

query collections($network: NetworkInput!, $addresses: [String!]!, $pagination: PaginationInput!, $sort: CollectionSortKeySortInput!) {
  collections(addresses: $addresses, network: $network, pagination: $pagination, sort: $sort) {
    totalCount
    pageInfo {
      limit
      offset
    }
    nodes {
      ...CollectionFragment
    }
  }
}

query tokens(
  $network: NetworkInput!
  $addresses: [String!]!
  $pagination: PaginationInput!
  $sort: TokenSortKeySortInput!
) {
  tokens(addresses: $addresses, network: $network, pagination: $pagination, sort: $sort) {
    totalCount
    pageInfo {
      limit
      offset
    }
    nodes {
      ...TokenFullFragment
    }
  }
}

query token($network: NetworkInput!, $token: TokenInput!) {
  token(token: $token, network: $network) {
    ...TokenFullFragment
  }
}

query tokensSummary(
  $network: NetworkInput!
  $addresses: [String!]!
  $pagination: PaginationInput!
  $sort: TokenSortKeySortInput!
) {
  tokens(addresses: $addresses, network: $network, pagination: $pagination, sort: $sort) {
    totalCount
    pageInfo {
      limit
      offset
    }
    nodes {
      ...TokenSummaryFragment
    }
  }
}
